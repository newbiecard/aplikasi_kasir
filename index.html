<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nasi Daun Jeruk POS v2 | Sistem Kasir Modern</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="icon" type="image/png" href="assets/leaf-icon.png">
</head>
<body>
    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="logo-brand">
                <i class="fas fa-leaf"></i>
                <div>
                    <h1>Nasi Daun Jeruk</h1>
                    <p class="tagline">POS System v2.0</p>
                </div>
            </div>
            
            <div class="nav-actions">
                <button id="posTab" class="nav-btn active">
                    <i class="fas fa-cash-register"></i> Kasir
                </button>
                <button id="backupTab" class="nav-btn">
                    <i class="fas fa-chart-bar"></i> Laporan
                </button>
                <button id="darkModeToggle" class="nav-btn">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="time-display">
                    <i class="fas fa-clock"></i>
                    <span id="currentTime">00:00:00</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- POS Page -->
        <div id="posPage" class="page active">
            <div class="dashboard-grid">
                <!-- Menu Section -->
                <section class="menu-section card">
                    <div class="section-header">
                        <h2><i class="fas fa-utensils"></i> Menu</h2>
                        <div class="total-cart">
                            <span id="itemCount">0</span> item
                        </div>
                    </div>

                    <!-- Main Item -->
                    <div class="main-item card highlight">
                        <div class="item-info">
                            <h3>Nasi Daun Jeruk</h3>
                            <p class="item-desc">Nasi wangi daun jeruk dengan rempah spesial</p>
                            <div class="price-tag">
                                <span class="price">Rp 10.000</span>
                                <span class="base">Dasar</span>
                            </div>
                        </div>
                        <button class="add-main-btn" id="addNasi">
                            <i class="fas fa-plus-circle"></i> Tambah
                        </button>
                    </div>

                    <!-- Toppings Section -->
                    <div class="toppings-section">
                        <h3 class="subtitle"><i class="fas fa-pepper-hot"></i> Pilih Topping</h3>
                        <p class="note">Pilih salah satu atau kedua topping (tambahan Rp 2.000)</p>
                        
                        <div class="toppings-grid">
                            <div class="topping-item card" data-topping="ayam">
                                <div class="topping-select">
                                    <input type="checkbox" id="toppingAyam" class="topping-checkbox">
                                    <label for="toppingAyam"></label>
                                </div>
                                <div class="topping-info">
                                    <h4>Ayam Suwir Pedas</h4>
                                    <p class="topping-desc">Ayam suwir dengan sambal matah</p>
                                </div>
                                <div class="topping-price">+ Rp 2.000</div>
                            </div>

                            <div class="topping-item card" data-topping="kulit">
                                <div class="topping-select">
                                    <input type="checkbox" id="toppingKulit" class="topping-checkbox">
                                    <label for="toppingKulit"></label>
                                </div>
                                <div class="topping-info">
                                    <h4>Kulit Ayam Crispy</h4>
                                    <p class="topping-desc">Kulit ayam krispi renyah</p>
                                </div>
                                <div class="topping-price">+ Rp 2.000</div>
                            </div>
                        </div>

                        <div class="topping-total">
                            <span>Total Tambahan:</span>
                            <span id="toppingTotal">Rp 0</span>
                        </div>
                    </div>

                    <!-- Drinks Section -->
                    <div class="drinks-section">
                        <h3 class="subtitle"><i class="fas fa-glass-whiskey"></i> Minuman</h3>
                        <div class="drinks-grid">
                            <div class="drink-item card">
                                <div class="drink-info">
                                    <h4>Es Jeruk Peras</h4>
                                    <p class="drink-desc">Jeruk peras asli dengan es</p>
                                </div>
                                <div class="drink-controls">
                                    <button class="qty-btn minus" data-drink="jeruk">-</button>
                                    <span class="drink-qty" id="qtyJeruk">0</span>
                                    <button class="qty-btn plus" data-drink="jeruk">+</button>
                                </div>
                                <div class="drink-price">Rp 5.000</div>
                            </div>

                            <div class="drink-item card">
                                <div class="drink-info">
                                    <h4>Teh Es Manis</h4>
                                    <p class="drink-desc">Teh manis dingin segar</p>
                                </div>
                                <div class="drink-controls">
                                    <button class="qty-btn minus" data-drink="teh">-</button>
                                    <span class="drink-qty" id="qtyTeh">0</span>
                                    <button class="qty-btn plus" data-drink="teh">+</button>
                                </div>
                                <div class="drink-price">Rp 3.000</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Cart & Payment Section -->
                <section class="cart-section card">
                    <div class="section-header">
                        <h2><i class="fas fa-shopping-cart"></i> Pesanan</h2>
                        <button id="clearCart" class="clear-btn">
                            <i class="fas fa-trash"></i> Kosongkan
                        </button>
                    </div>

                    <!-- Order Summary -->
                    <div class="order-summary">
                        <div class="order-items" id="orderItems">
                            <!-- Items will be dynamically added here -->
                            <div class="empty-order">
                                <i class="fas fa-shopping-basket"></i>
                                <p>Belum ada pesanan</p>
                                <small>Tambahkan item dari menu</small>
                            </div>
                        </div>

                        <!-- Price Breakdown -->
                        <div class="price-breakdown">
                            <div class="price-row">
                                <span>Nasi Daun Jeruk</span>
                                <span id="nasiPrice">Rp 0</span>
                            </div>
                            <div class="price-row">
                                <span>Topping Tambahan</span>
                                <span id="toppingPrice">Rp 0</span>
                            </div>
                            <div class="price-row">
                                <span>Minuman</span>
                                <span id="drinkPrice">Rp 0</span>
                            </div>
                            <div class="price-row total">
                                <span><strong>TOTAL</strong></span>
                                <span id="finalTotal"><strong>Rp 0</strong></span>
                            </div>
                        </div>

                        <!-- Payment Section -->
                        <div class="payment-section">
                            <h3><i class="fas fa-money-bill-wave"></i> Pembayaran</h3>
                            
                            <div class="payment-input-group">
                                <label for="cashInput">Uang Tunai</label>
                                <div class="input-with-icon">
                                    <i class="fas fa-rupiah-sign"></i>
                                    <input type="number" id="cashInput" placeholder="Masukkan jumlah uang" min="0">
                                </div>
                            </div>

                            <!-- Quick Cash Buttons -->
                            <div class="quick-cash">
                                <button class="cash-btn" data-amount="10000">Rp 10.000</button>
                                <button class="cash-btn" data-amount="20000">Rp 20.000</button>
                                <button class="cash-btn" data-amount="50000">Rp 50.000</button>
                                <button class="cash-btn" data-amount="100000">Rp 100.000</button>
                            </div>

                            <!-- Change Display -->
                            <div class="change-display" id="changeDisplay">
                                <div class="change-label">
                                    <i class="fas fa-exchange-alt"></i>
                                    <span>Kembalian</span>
                                </div>
                                <div class="change-amount" id="changeAmount">Rp 0</div>
                            </div>

                            <!-- Validation Message -->
                            <div class="validation-msg error" id="errorMsg">
                                <i class="fas fa-exclamation-circle"></i>
                                <span>Uang pembayaran kurang!</span>
                            </div>

                            <!-- Action Buttons -->
                            <div class="action-buttons">
                                <button id="processOrder" class="btn-primary btn-large" disabled>
                                    <i class="fas fa-check-circle"></i> Proses Transaksi
                                </button>
                                <button id="printReceipt" class="btn-secondary" disabled>
                                    <i class="fas fa-print"></i> Cetak Struk
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Recent Transactions -->
            <div class="recent-transactions card">
                <h3><i class="fas fa-history"></i> Transaksi Terakhir</h3>
                <div class="transactions-list" id="recentTransactions">
                    <!-- Recent transactions will be added here -->
                    <div class="no-transactions">
                        Belum ada transaksi hari ini
                    </div>
                </div>
            </div>
        </div>

        <!-- Backup & Reports Page -->
        <div id="backupPage" class="page">
            <div class="reports-header">
                <h2><i class="fas fa-chart-pie"></i> Laporan & Backup</h2>
                <div class="report-controls">
                    <button id="exportExcel" class="btn-success">
                        <i class="fas fa-file-excel"></i> Export Excel
                    </button>
                    <button id="printReport" class="btn-secondary">
                        <i class="fas fa-print"></i> Cetak Laporan
                    </button>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card income">
                    <div class="stat-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="dailyIncome">Rp 0</div>
                        <div class="stat-label">Pemasukan Hari Ini</div>
                    </div>
                </div>

                <div class="stat-card transactions">
                    <div class="stat-icon">
                        <i class="fas fa-receipt"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="transactionCount">0</div>
                        <div class="stat-label">Total Transaksi</div>
                    </div>
                </div>

                <div class="stat-card average">
                    <div class="stat-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-value" id="averageOrder">Rp 0</div>
                        <div class="stat-label">Rata-rata Pesanan</div>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-card card">
                <div class="filter-group">
                    <div class="filter-item">
                        <label for="dateFilter"><i class="fas fa-calendar"></i> Filter Tanggal</label>
                        <input type="date" id="dateFilter" value="">
                    </div>
                    <div class="filter-item">
                        <label for="searchFilter"><i class="fas fa-search"></i> Cari Transaksi</label>
                        <input type="text" id="searchFilter" placeholder="Cari berdasarkan ID atau item...">
                    </div>
                    <button id="clearFilters" class="btn-outline">
                        <i class="fas fa-times"></i> Reset Filter
                    </button>
                </div>
            </div>

            <!-- Transactions Table -->
            <div class="transactions-table card">
                <div class="table-header">
                    <h3>Data Transaksi</h3>
                    <div class="table-actions">
                        <button id="deleteSelected" class="btn-danger" disabled>
                            <i class="fas fa-trash"></i> Hapus Terpilih
                        </button>
                        <button id="deleteAll" class="btn-danger">
                            <i class="fas fa-trash-alt"></i> Hapus Semua
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <table id="transactionsTable">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" id="selectAll">
                                </th>
                                <th>ID Transaksi</th>
                                <th>Tanggal</th>
                                <th>Items</th>
                                <th>Topping</th>
                                <th>Minuman</th>
                                <th>Total</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsBody">
                            <!-- Data will be loaded here -->
                            <tr class="no-data">
                                <td colspan="8">
                                    <i class="fas fa-database"></i>
                                    <p>Belum ada data transaksi</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receiptModal" class="modal">
        <div class="modal-content receipt-content">
            <div class="receipt-header">
                <div class="receipt-logo">
                    <i class="fas fa-leaf"></i>
                    <h3>Nasi Daun Jeruk</h3>
                </div>
                <p>Jl. Jeruk Manis No. 123</p>
                <p>Telp: (021) 1234-5678</p>
            </div>

            <div class="receipt-body">
                <div class="receipt-info">
                    <div class="receipt-row">
                        <span>ID:</span>
                        <span id="receiptId">TRX-001</span>
                    </div>
                    <div class="receipt-row">
                        <span>Tanggal:</span>
                        <span id="receiptDate">01/01/2024 10:00</span>
                    </div>
                    <div class="receipt-row">
                        <span>Kasir:</span>
                        <span id="receiptCashier">Admin</span>
                    </div>
                </div>

                <div class="receipt-items" id="receiptItems">
                    <!-- Items will be added here -->
                </div>

                <div class="receipt-total">
                    <div class="total-row">
                        <span>Total:</span>
                        <span id="receiptTotal">Rp 0</span>
                    </div>
                    <div class="total-row">
                        <span>Tunai:</span>
                        <span id="receiptCash">Rp 0</span>
                    </div>
                    <div class="total-row change">
                        <span>Kembali:</span>
                        <span id="receiptChange">Rp 0</span>
                    </div>
                </div>

                <div class="receipt-footer">
                    <p>Terima kasih telah berbelanja</p>
                    <p class="receipt-note">* Barang yang sudah dibeli tidak dapat dikembalikan</p>
                </div>
            </div>

            <div class="modal-actions">
                <button id="closeReceipt" class="btn-secondary">Tutup</button>
                <button id="printReceiptBtn" class="btn-primary">
                    <i class="fas fa-print"></i> Cetak
                </button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content confirm-content">
            <div class="confirm-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 id="confirmTitle">Konfirmasi Hapus</h3>
            <p id="confirmMessage">Apakah Anda yakin ingin menghapus data ini?</p>
            <div class="confirm-actions">
                <button id="confirmCancel" class="btn-outline">Batal</button>
                <button id="confirmDelete" class="btn-danger">Hapus</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-info">
                <div class="footer-logo">
                    <i class="fas fa-leaf"></i>
                    <span>Nasi Daun Jeruk POS</span>
                </div>
                <p>Â© 2024 Sistem Kasir Modern v2.0</p>
            </div>
            <div class="footer-stats">
                <div class="footer-stat">
                    <i class="fas fa-sync-alt"></i>
                    <span>Backup Realtime</span>
                </div>
                <div class="footer-stat">
                    <i class="fas fa-shield-alt"></i>
                    <span>Data Aman</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script src="js/app.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/backup.js"></script>
</body>
</html>